# Environment Configuration Template
# Copy this file to .env and update with your values
# Never commit .env to version control - it's already in .gitignore

# =============================================================================
# REQUIRED CONFIGURATION
# =============================================================================
# These variables MUST be set for scripts to function

# GitHub Repository (format: owner/repo-name)
# Example: YourOrg/static-site
export GITHUB_REPO="YourOrg/your-repo"

# GitHub Repository Owner (extracted from GITHUB_REPO if not set)
# Example: YourOrg
export GITHUB_OWNER="YourOrg"

# Project Short Name (used for resource naming within accounts)
# Format: lowercase with hyphens, no special characters
# Example: static-site
# Used in: IAM role names, account names, resource prefixes
export PROJECT_SHORT_NAME="your-project"

# Project Full Name (used for globally unique resources like S3 buckets)
# Format: lowercase with hyphens, typically owner-project
# Example: yourorg-static-site
# Used in: S3 bucket names, DynamoDB table names, KMS key aliases
export PROJECT_NAME="yourorg-your-project"

# =============================================================================
# AWS CONFIGURATION
# =============================================================================

# AWS Default Region
# Default: us-east-1 if not set
# Common options: us-east-1, us-west-2, eu-west-1
export AWS_DEFAULT_REGION="us-east-1"

# Management Account ID (12 digits)
# Optional - will be auto-detected from AWS credentials if not set
# Set this if you have multiple AWS profiles or want to be explicit
# Example: 123456789012
export MANAGEMENT_ACCOUNT_ID=""

# Environment-Specific Account IDs (12 digits each)
# Optional - loaded from scripts/bootstrap/accounts.json if available
# Set these if accounts.json doesn't exist or you want to override
export AWS_ACCOUNT_ID_DEV=""
export AWS_ACCOUNT_ID_STAGING=""
export AWS_ACCOUNT_ID_PROD=""

# =============================================================================
# OIDC CONFIGURATION
# =============================================================================

# External ID for GitHub Actions OIDC (auto-generated if not set)
# Default: github-actions-${PROJECT_SHORT_NAME}
# Only override if you have specific requirements
export EXTERNAL_ID="github-actions-your-project"

# =============================================================================
# OPTIONAL CONFIGURATION
# =============================================================================

# Execution Modes (for destroy scripts)
DRY_RUN="false"                    # Set to "true" to simulate without destroying
VERBOSE="false"                    # Set to "true" for detailed logging
SKIP_VERIFICATION="false"          # Set to "true" to skip confirmation prompts
FORCE_DESTROY="false"              # Set to "true" to force destruction
INCLUDE_CROSS_ACCOUNT="true"       # Set to "false" to skip cross-account cleanup
CLOSE_MEMBER_ACCOUNTS="false"      # Set to "true" to close AWS member accounts
CLEANUP_TERRAFORM_STATE="true"     # Set to "false" to preserve Terraform state
S3_TIMEOUT="180"                   # S3 bucket deletion timeout in seconds

# Account Filter (comma-separated list of account IDs)
# Only destroy resources in these accounts
# Leave empty to destroy in all accounts
ACCOUNT_FILTER=""

# =============================================================================
# METADATA (Advanced)
# =============================================================================

# Resource Tags (JSON format)
# Applied to AWS Organizations resources (OUs, accounts)
# Override only if you need custom tags
export RESOURCE_TAGS_JSON='{
  "ManagedBy": "bootstrap-scripts",
  "Repository": "'"${GITHUB_REPO}"'",
  "Project": "'"${PROJECT_SHORT_NAME}"'"
}'

# Contact Information (JSON format)
# Optional contact info for AWS account contacts
# See AWS documentation for supported fields
export CONTACT_INFO_JSON='{}'

# =============================================================================
# USAGE INSTRUCTIONS
# =============================================================================

# Local Development Setup:
# 1. Copy this file to .env:
#    cp .env.example .env
#
# 2. Edit .env and set your values
#
# 3. Source the file in your shell:
#    source .env
#
# 4. Or add to your shell profile (~/.bashrc, ~/.zshrc):
#    source /path/to/project/.env

# GitHub Actions Setup:
# 1. Go to: https://github.com/OWNER/REPO/settings/variables/actions
#
# 2. Create repository variables for each required config:
#    - GITHUB_REPO
#    - PROJECT_SHORT_NAME
#    - PROJECT_NAME
#    - AWS_DEFAULT_REGION
#    - MANAGEMENT_ACCOUNT_ID (optional)
#
# 3. GitHub Actions workflows will automatically use these values
#
# 4. For secrets (AWS credentials), use repository secrets instead:
#    - https://github.com/OWNER/REPO/settings/secrets/actions

# Forking This Repository:
# 1. Create .env file with your organization's values
# 2. Or set repository variables in GitHub
# 3. Update accounts.json after running bootstrap-organization.sh
# 4. Never commit real credentials or account IDs to git

# =============================================================================
# VALIDATION
# =============================================================================

# To verify your configuration:
# 1. Source your .env file: source .env
# 2. Run: scripts/bootstrap/bootstrap-organization.sh --dry-run
# 3. Check that all required variables are set correctly

# Required Variable Checklist:
# [ ] GITHUB_REPO is set
# [ ] PROJECT_SHORT_NAME is set
# [ ] PROJECT_NAME is set
# [ ] AWS_DEFAULT_REGION is set (or using default us-east-1)
# [ ] AWS credentials are configured (aws configure)
# [ ] accounts.json will be created by bootstrap-organization.sh

# =============================================================================
# SECURITY NOTES
# =============================================================================

# ⚠️  IMPORTANT:
# - .env is in .gitignore - NEVER commit it to version control
# - Do NOT put AWS access keys/secrets in .env - use AWS CLI profiles
# - Account IDs are sensitive - keep .env private
# - For CI/CD, use GitHub repository variables/secrets
# - Regularly rotate AWS credentials

# ✅ BEST PRACTICES:
# - Use AWS CLI profiles for credential management
# - Use GitHub OIDC for passwordless authentication
# - Keep .env in a secure location
# - Document which values are safe to share (repo name, region)
# - Keep account IDs private (treat as sensitive)
