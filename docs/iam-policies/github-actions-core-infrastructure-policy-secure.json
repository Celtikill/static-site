{
  "Version": "2012-10-17",
  "Statement": [
    {
      "Sid": "GeneralPermissions",
      "Effect": "Allow",
      "Action": [
        "sts:GetCallerIdentity",
        "ec2:DescribeRegions"
      ],
      "Resource": "*"
    },
    {
      "Sid": "S3Operations",
      "Effect": "Allow",
      "Action": [
        "s3:*"
      ],
      "Resource": [
        "arn:aws:s3:::static-site-dev-*",
        "arn:aws:s3:::static-site-dev-*/*",
        "arn:aws:s3:::static-website-dev-*",
        "arn:aws:s3:::static-website-dev-*/*",
        "arn:aws:s3:::static-site-staging-*",
        "arn:aws:s3:::static-site-staging-*/*",
        "arn:aws:s3:::static-website-staging-*",
        "arn:aws:s3:::static-website-staging-*/*",
        "arn:aws:s3:::static-site-prod-*",
        "arn:aws:s3:::static-site-prod-*/*",
        "arn:aws:s3:::static-website-prod-*",
        "arn:aws:s3:::static-website-prod-*/*",
        "arn:aws:s3:::static-site-int-test*",
        "arn:aws:s3:::static-site-int-test*/*",
        "arn:aws:s3:::*-replica",
        "arn:aws:s3:::*-replica/*",
        "arn:aws:s3:::*-access-logs",
        "arn:aws:s3:::*-access-logs/*"
      ],
      "Condition": {
        "StringEquals": {
          "aws:RequestedRegion": [
            "us-east-1",
            "us-east-2"
          ]
        }
      }
    },
    {
      "Sid": "CloudFrontOperations",
      "Effect": "Allow",
      "Action": [
        "cloudfront:*"
      ],
      "Resource": "*",
      "Condition": {
        "StringEquals": {
          "aws:RequestedRegion": "us-east-1"
        }
      }
    },
    {
      "Sid": "ACMOperations",
      "Effect": "Allow",
      "Action": [
        "acm:DescribeCertificate",
        "acm:ListCertificates",
        "acm:GetCertificate",
        "acm:ListTagsForCertificate"
      ],
      "Resource": "*",
      "Condition": {
        "StringEquals": {
          "aws:RequestedRegion": "us-east-1"
        }
      }
    },
    {
      "Sid": "WAFOperations",
      "Effect": "Allow",
      "Action": [
        "wafv2:*"
      ],
      "Resource": "*",
      "Condition": {
        "StringEquals": {
          "aws:RequestedRegion": "us-east-1"
        }
      }
    },
    {
      "Sid": "MonitoringOperations",
      "Effect": "Allow",
      "Action": [
        "cloudwatch:*",
        "logs:*",
        "sns:*",
        "budgets:*"
      ],
      "Resource": "*",
      "Condition": {
        "StringEquals": {
          "aws:RequestedRegion": [
            "us-east-1",
            "us-east-2"
          ]
        }
      }
    },
    {
      "Sid": "Route53Operations",
      "Effect": "Allow",
      "Action": [
        "route53:CreateHostedZone",
        "route53:DeleteHostedZone",
        "route53:GetHostedZone",
        "route53:ListHostedZones",
        "route53:ChangeResourceRecordSets",
        "route53:GetChange",
        "route53:ListResourceRecordSets",
        "route53:CreateHealthCheck",
        "route53:DeleteHealthCheck",
        "route53:GetHealthCheck",
        "route53:ListHealthChecks",
        "route53:UpdateHealthCheck",
        "route53:ChangeTagsForResource",
        "route53:ListTagsForResource"
      ],
      "Resource": "*"
    },
    {
      "Sid": "KMSOperations",
      "Effect": "Allow",
      "Action": [
        "kms:CreateKey",
        "kms:TagResource",
        "kms:UntagResource",
        "kms:PutKeyPolicy",
        "kms:GetKeyPolicy",
        "kms:DescribeKey",
        "kms:GetKeyRotationStatus",
        "kms:EnableKeyRotation",
        "kms:CreateAlias",
        "kms:UpdateAlias",
        "kms:DeleteAlias",
        "kms:ListAliases",
        "kms:ListResourceTags",
        "kms:ScheduleKeyDeletion",
        "kms:CancelKeyDeletion"
      ],
      "Resource": "*",
      "Condition": {
        "StringEquals": {
          "aws:RequestedRegion": [
            "us-east-1",
            "us-east-2"
          ]
        }
      }
    },
    {
      "Sid": "IAMOperationsLimited",
      "Effect": "Allow",
      "Action": [
        "iam:ListOpenIDConnectProviders",
        "iam:GetOpenIDConnectProvider",
        "iam:ListRoles",
        "iam:GetRole"
      ],
      "Resource": [
        "*",
        "arn:aws:iam::*:role/static-site-*"
      ]
    },
    {
      "Sid": "TerraformStateManagement",
      "Effect": "Allow",
      "Action": [
        "s3:GetObject",
        "s3:PutObject",
        "s3:DeleteObject",
        "s3:ListBucket",
        "s3:GetBucketVersioning",
        "s3:GetBucketLogging",
        "s3:PutBucketVersioning",
        "s3:GetBucketAcl",
        "s3:GetBucketPolicy",
        "s3:GetBucketTagging",
        "s3:PutBucketTagging",
        "s3:GetObjectVersion",
        "s3:DeleteObjectVersion"
      ],
      "Resource": [
        "arn:aws:s3:::static-site-terraform-state-*",
        "arn:aws:s3:::static-site-terraform-state-*/*",
        "arn:aws:s3:::terraform-state-*",
        "arn:aws:s3:::terraform-state-*/*"
      ]
    },
    {
      "Sid": "DynamoDBStateLocking",
      "Effect": "Allow",
      "Action": [
        "dynamodb:GetItem",
        "dynamodb:PutItem",
        "dynamodb:DeleteItem",
        "dynamodb:DescribeTable"
      ],
      "Resource": [
        "arn:aws:dynamodb:*:*:table/terraform-state-lock-*",
        "arn:aws:dynamodb:*:*:table/static-site-terraform-lock-*"
      ]
    }
  ]
}